<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Network Packet Sniffer</title>
  <style>
    body {
      background-color: #121212;
      color: #AD88C6;
      font-family: monospace;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #b7282e;
    }
    #output {
      background-color: #1e1e1e;
      border: 1px solid #AD88C6;
      padding: 15px;
      height: 80vh;
      overflow-y: scroll;
      white-space: pre-wrap;
    }
    button {
      background-color: #b7282e;
      border: none;
      padding: 10px 20px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin: 10px 0;
    }
  </style>
</head>
<body>

<h1>Live Packet Sniffer</h1>
<button onclick="startSniffing()">Start Sniffing</button>
<div id="output">
  <!-- Output will be appended here -->
</div>

<script>
  function startSniffing() {
    fetch('/start-sniffing') // Your Python backend should define this route
      .then(response => response.text())
      .then(data => {
        document.getElementById("output").innerText += data + "\n";
      })
      .catch(error => {
        document.getElementById("output").innerText += "Error: " + error + "\n";
      });
  }

  // Optional: Poll logs every 2 seconds (simulate live stream)
  setInterval(() => {
    fetch('/logs')
      .then(response => response.text())
      .then(data => {
        document.getElementById("output").innerText = data;
        document.getElementById("output").scrollTop = document.getElementById("output").scrollHeight;
      });
  }, 2000);
</script>

</body>
</html>
